parameters:
    pim_extended_attribute_type.attribute_type.range.class: Pim\Bundle\ExtendedAttributeTypeBundle\AttributeType\RangeType

    pim_datagrid.product.attribute_type.pim_extended_attribute_text_collection:
        column:
            type:        product_value_field
            selector:    product_value_base
        filter:
            type:        product_value_string
            ftype:       string
        sorter:          product_value

    pim_extended_attribute_type.validator.constraint_guesser.text_collection.class: Pim\Bundle\ExtendedAttributeTypeBundle\Validator\ConstraintGuesser\TextCollectionGuesser

services:
    pim_extended_attribute_type.attribute_type.range:
        class: '%pim_extended_attribute_type.attribute_type.range.class%'
        arguments:
            - range # backend_type
            - pim_form_type_range # form type
            - '@pim_catalog.validator.constraint_guesser.chained_attribute'
        tags:
            - { name: pim_catalog.attribute_type, alias: pim_extended_attribute_type_range, entity: '%pim_catalog.entity.product.class%' }

    pim_extended_attribute_type.attribute_type.text_collection:
        class: Pim\Bundle\ExtendedAttributeTypeBundle\AttributeType\TextCollectionType
        arguments:
            - text
            - textarea
            - '@pim_catalog.validator.constraint_guesser.chained_attribute'
        tags:
            - { name: pim_catalog.attribute_type, alias: pim_extended_attribute_text_collection }

    pim_extended_attribute_type.validator.constraint_guesser.text_collection:
        public: false
        class: '%pim_extended_attribute_type.validator.constraint_guesser.text_collection.class%'
        tags:
            - { name: pim_catalog.constraint_guesser.attribute }

    pim_catalog.doctrine.query.filter.text_collection:
        class: '%pim_catalog.doctrine.query.filter.string.class%'
        arguments:
            - '@pim_catalog.validator.helper.attribute'
            - ['pim_extended_attribute_text_collection']
            - ['STARTS WITH', 'ENDS WITH', 'CONTAINS', 'DOES NOT CONTAIN']
        tags:
            - { name: 'pim_catalog.doctrine.query.filter', priority: 30 }
